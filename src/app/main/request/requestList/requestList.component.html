<div class="container-login100" style="background-image: url('../assets/images/bg.jpg');">
    <div class="wrap-home p-l-55 p-r-55 p-t-80 p-b-30">

        <div class="header-title">
            <span class="page-admin-title">Welcome {{userWallet.username}}
            </span>
            <button class="btn btn-outline-danger header-button-row" (click)="logout()" type="button"><i
                    class="fa fa-sign-out"></i>Logout</button>
        </div>

        <div *ngIf="userWallet.role==='seller'">
            <h5>Balance: {{ userWallet.balance }}</h5>
            <div class="btn-group function-btn-row">
                <button class="btn btn-outline-primary" (click)="openImportModal()" type="button"><i
                        class="fa fa-cart-arrow-down"></i>Import</button>
                <button class="btn btn-outline-info" (click)="openTransferModal()" type="button"><i
                        class="fa fa-share-square-o"></i>Transfer</button>
            </div>
        </div>

        <br />
        <!-- <br /> -->

        <div class="row align-items-center">
            <!--<Primeng-Datatable-Start>-->
            <div class="primeng-datatable-container">

                <p-table #dataTable (onLazyLoad)="getUserRequests($event)" [value]="primengTableHelper.records"
                    rows="{{primengTableHelper.defaultRecordsCountPerPage}}" [paginator]="false" [lazy]="true"
                    [scrollable]="true" ScrollWidth="100%" [responsive]="primengTableHelper.isResponsive"
                    [resizableColumns]="primengTableHelper.resizableColumns">

                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: 80px; text-align: center;">
                                Action
                            </th>
                            <!-- <th *ngIf="userWallet.role==='supplier'" style="width: 150px;">
                                Seller's Address
                            </th>
                            <th *ngIf="userWallet.role==='seller'" style="width: 150px;">
                                User's Address
                            </th> -->

                            <th *ngIf="userWallet.role==='supplier'" style="width: 150px;">
                                Username
                            </th>
                            <th *ngIf="userWallet.role==='seller'" th style="width: 150px;">
                                UserName
                            </th>
                            <th style="width: 150px;">
                                Product Name
                            </th>
                            <th *ngIf="userWallet.role==='seller'" style="width: 150px;">
                                Quantity Of Product
                            </th>
                            <th *ngIf="userWallet.role==='supplier'" style="width: 150px;">
                                Quantity Of Package
                            </th>
                            <th *ngIf="userWallet.role==='seller'" style="width: 150px;">
                                Total
                            </th>
                            <th *ngIf="userWallet.role==='supplier'" style="width: 150px;">
                                Brand
                            </th>

                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-record="$implicit">
                        <tr>
                            <td style="width: 80px; text-align: center;">
                                <button class="btn btn-outline-primary"
                                    (click)="openRequestHandler(record.requestId, record.username, record.productName, record.quantity, record.brand, record.total, record.userAddress)"
                                    type="button" style="text-align: center;">
                                    <i class="fa fa-cogs"></i>
                                    <span class="caret"></span> Handle
                                </button>
                            </td>
                            <!-- <td style="width: 150px; word-wrap: break-word;">
                                {{record.userAddress}}
                            </td> -->
                            <!-- <td *ngIf="userWallet.role==='supplier'" style="width: 150px; word-wrap: break-word;">
                                {{record.username}}
                            </td> -->
                            <td style="width: 150px; word-wrap: break-word;">
                                {{record.username}}
                            </td>
                            <td style="width: 150px; word-wrap: break-word;">
                                {{record.productName}}
                            </td>
                            <td style="width: 150px; word-wrap: break-word;">
                                {{record.quantity}}
                            </td>
                            <td *ngIf="userWallet.role==='seller'" style="width: 150px; word-wrap: break-word;">
                                {{record.total}}
                            </td>
                            <td *ngIf="userWallet.role==='supplier'" style="width: 150px; word-wrap: break-word;">
                                {{record.brand}}
                            </td>

                        </tr>
                    </ng-template>
                </p-table>

                <div class="primeng-no-data" *ngIf="primengTableHelper.totalRecordsCount == 0"
                    style="text-align: center; opacity: 0.7;">
                    No Request
                </div>
                <div class="primeng-paging-container">
                    <p-paginator rows="{{primengTableHelper.defaultRecordsCountPerPage}}" #paginator
                        (onPageChange)="getUserRequests($event)" [totalRecords]="primengTableHelper.totalRecordsCount"
                        [rowsPerPageOptions]="primengTableHelper.predefinedRecordsCountPerPage">
                    </p-paginator>
                    <span class="total-records-count">
                        Total: {{primengTableHelper.totalRecordsCount}}
                    </span>
                </div>
            </div>

            <div class="history">
                <div class="btn-group">
                    <button *ngIf="userWallet.role==='seller'" (click)="getRequest()" type="button"
                        class="btn btn-outline-primary successListBtn">
                        Request
                    </button>
                    <button (click)="getListHistory()" type="button" class="btn btn-outline-primary historyBtn">
                        History
                    </button>
                    <button (click)="getSuccessfulList()" type="button" class="btn btn-outline-primary successListBtn">
                        Successful Transactions
                    </button>
                </div>

                <ul *ngFor="let req of listSellerRequest" [hidden]="showRequest">
                    <li>{{ req }}</li>
                </ul>
                <ul *ngFor="let transaction of listHistory" [hidden]="isDisplay">
                    <li>{{ transaction }}</li>
                </ul>
                <ul *ngFor="let output of successfulList" [hidden]="isShow">
                    <li>{{ output }} <a (click)="openDetail(userWallet.role)"><i class="fa fa-history fa-2x"
                                aria-hidden="true"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<sellerImportModal #sellerImportModal></sellerImportModal>
<sellerTransferModal #sellerTransferModal (balanceUpdate)="updateBalance(userWallet.walletId)"></sellerTransferModal>
<productDetailModal #productDetailModal></productDetailModal>