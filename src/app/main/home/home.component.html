<div class="container-login100" style="background-image: url('../assets/images/bg-06.jpg');">
  <div class="wrap-home p-l-55 p-r-55 p-t-80 p-b-30">
    <div class="header-title">
      <span class="page-admin-title">Welcome {{ userWallet.username }} </span>
      <button class="btn btn-outline-danger header-button-row" (click)="logout()" type="button">
        <i class="fa fa-sign-out"></i>Logout
      </button>
    </div>

    <div>
      <h5>Balance: {{ userWallet.balance }}</h5>
    </div>

    <form [formGroup]="formHome" (onShown)="shown()" novalidate autocomplete="off">
      <div class="form-row">
        <div class="form-group div-align-1 item-form-control col-xs-5 col-sm-5 col-md-5 col-lg-5">
          <label for="userChoice">Item</label>
          <ng-select #UserOptions [items]="simpleItems" id="userChoice" [(ngModel)]="userChoice"
            formControlName="userChoice" name="userChoice" placeholder="--Choose your item--">
          </ng-select>
          <div class="valid-height">
            <validation [control]="formHome.get('userChoice')"></validation>
          </div>

          <label for="quantity">Quantity</label>
          <input name="quantity" [(ngModel)]="buyQuantity" formControlName="quantity" id="quantity" type="text"
            class="form-control item-form-control" placeholder="--Number you want--" maxlength="12"
            oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
            onkeypress="javascript: if ( event.keyCode > 31 && (event.keyCode < 48 || event.keyCode > 57)) return false;" />
          <div class="valid-height">
            <validation [control]="formHome.get('quantity')"></validation>
          </div>
          <br />

          <button (click)="buy()" type="button" class="btn btn-primary blue btn-align">
            <i class="fa fa-cart-arrow-down"></i>
            Buy
          </button>
        </div>

        <hr style="border: none; border-left: 1px solid #140148; height: 30vh; width: 1px;" />

        <div class="form-group div-align-2 item-form-control col-xs-5 col-sm-5 col-md-5 col-lg-5">
          <label for="amount">Amount</label>
          <input name="amount" [(ngModel)]="transferAmount" formControlName="amount" id="amount" type="text"
            class="form-control item-form-control" placeholder="--The amount of money--" maxlength="15"
            oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
            onkeypress="javascript: if ( event.keyCode > 31 && (event.keyCode < 48 || event.keyCode > 57)) return false;" />
          <div class="valid-height">
            <validation [control]="formHome.get('amount')"></validation>
          </div>

          <label for="receiver">Receiver's Address</label>
          <input name="receiver" [(ngModel)]="transferReceiver" formControlName="receiver" id="receiver" type="text"
            class="form-control item-form-control" placeholder="--Receiver's Address--" required />
          <div class="valid-height">
            <validation [control]="formHome.get('receiver')"></validation>
          </div>

          <br />

          <button (click)="transfer()" type="button" class="btn btn-primary blue btn-align">
            <i class="fa fa-share-square-o"></i>
            Transfer
          </button>
        </div>
      </div>

      <!-- <div class="primeng-datatable-container">
        <p-table [rows]="3" #dataTable [value]="dataBC" (onLazyLoad)="getDataBC($event)"
          [paginator]="false" [lazy]="true" [scrollable]="true" ScrollWidth="100%">
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 80px;">
                Product Name
              </th>
              <th style="width: 150px;">
                Quantity
              </th>
              <th style="width: 150px;">
                ProductCode
              </th>
              <th style="width: 150px;">
                Manufacturing Date
              </th>
              <th style="width: 150px;">
                Expiry
              </th>
              <th style="width: 150px;">
                Sold Date
              </th>

            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-record="$implicit">
            <tr>
              <td style="width: 150px; word-wrap: break-word;">
                {{record.productName}}
              </td>
              <td style="width: 150px; word-wrap: break-word;">
                {{record.quantity}}
              </td>
              <td style="width: 150px; word-wrap: break-word;">
                {{record.productCode}}
              </td>
              <td style="width: 150px; word-wrap: break-word;">
                {{record.manufacturingDate}}
              </td>
              <td style="width: 150px; word-wrap: break-word;">
                {{record.expiry}}
              </td>
              <td style="width: 150px; word-wrap: break-word;">
                {{record.soldDate}}
              </td>

            </tr>
          </ng-template>
        </p-table>

        <div class="primeng-paging-container">
          <p-paginator [rows]="3" #paginator (onPageChange)="getDataBC($event)">
          </p-paginator>
          <span *ngIf="dataBC !== undefined" class="total-records-count">
            Total:
          </span>
          <span *ngIf="dataBC === undefined" class="total-records-count">
            Total: 0
          </span>
        </div>
      </div> -->

    </form>

    <div class="history">
      <div class="btn-group">
        <button (click)="getRequests()" type="button" class="btn btn-outline-primary historyBtn">
          Requests
        </button>
        <button (click)="getListHistory()" type="button" class="btn btn-outline-primary historyBtn">
          History
        </button>
        <button (click)="getSuccessfulList()" type="button" class="btn btn-outline-primary successListBtn">
          Successful Transactions
        </button>
      </div>

      <ul *ngFor="let request of listRequest" [hidden]="showRequest">
        <li>{{ request }}</li>
      </ul>
      <ul *ngFor="let transaction of listHistory" [hidden]="isDisplay">
        <li>{{ transaction }}</li>
      </ul>
      <ul *ngFor="let output of successfulList" [hidden]="isShow">
        <li>{{ output.info }} <a (click)="openDetail(output.requestId)"><i class="fa fa-history"
          aria-hidden="true"></i></a></li>
      </ul>
    </div>
  </div>
</div>

<productDetailModal #productDetailModal></productDetailModal>